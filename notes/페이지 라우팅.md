# 페이지 라우팅
## [소개](https://www.inflearn.com/course/lecture?courseSlug=%ED%95%9C%EC%9E%85-%EB%A6%AC%EC%95%A1%ED%8A%B8&unitId=103540&tab=curriculum)
**경로에 따라 알맞은 페이지를 렌더랑 하는 과정**

사용자가 방문하는 각 URL에 대해 서로 다른 컴포넌트를 렌더랑하는 방법을 의미한다.
이는 전통적인 웹 애플리케이션의 여러 HTML 페이지 대산, 하나의 페이지 내에서
자바스크립트를 사용해 사용자 경험을 제공하는 `Single Page Application (SPA)`에서 특히 중요하다.
![img1](/notes/imgs/img1.png)

### Multi-Page Application (MPA)
**서버가 여러 개의 페이지를 가지고 있는 방식으로 많은 서비스가 사용하는 전통적인 방식이다.**

각 페이지는 독립적으로 렌더링되고, 페이지 간 이동 시 전체 페이지가 새로 고침(리렌더링)된다.
페이지 전환 시마다 서버로부터 새로운 HTML 페이지를 받아온다.

#### 장점
- SEO에 유리하며, 추기 로드 시간이 빠르다.

#### 단점
- 페이지 이동이 쾌적하지 못하다.
- 페이지가 렌더링될 때 마다 이전의 값은 삭제하고 다시 전체를 렌더링 해야한다.
- 서버의 부하가 심해진다. (대기열이 생기는 증상이 나타난다.)

### Server-Side Rendering (SSR)
서버에서 페이지를 렌더링하여 클라이언트에 HTML을 전송하는 방식이다.
초기 요청 시 서버에서 HTML을 생성하여 클라이언트에 보내고, 클라이언트는 그 페이지를 그대로 렌더링한다.
이후 필요한 JavaScript 파일들이 로드되어 추가적인 인터랙션을 제공한다.

#### 장점
- 초기 로딩 속도가 빠르다.
- SEO에 유리하다.
- 사용자가 즉시 페이지의 콘텐츠를 볼 수 있다.

#### 단점
- 서버 부하가 증가할 수 있다.
- 사용자와 서버 간의 네트워크 지연이 생길 수 있다.

### Single-Page Application (SPA)
하나의 HTML로 구성된 웹 애플리케이션이다. 최초 로드 후, 페이지 내에서 JavaScript를
사용해 컨텐츠를 동적으로 교체하면서 페이지를 갱신한다. 이 방식에서는 페이지 간 이동이 브라우저의 전체 리로드 없이 수행된다.

#### 장점
- 빠른 페이지 전환이 가능하다.
- SEO에 유리하다.
- 클라이언트 사이드에서 많은 로직을 처리할 수 있다.

#### 단점
- 초기 로딩 시간이 길어질 수 있다.
- SEO에 불리하다.
- 클라이언트에서 모든 자바스크립트를 처리하기 때문에 브라우저의 성능에 영향을 받을 수 있다.

### Client-Side Rendering (CSR)
클라이언트 측에서 JavaScript로 모든 페이지를 렌더링하는 방식을 의미한다.
브라우저가 서버에서 받은 빈 HTML 파일에 JavaScript를 실행하여 콘텐츠를 동적으로 생성하고,
이후 페이지의 모든 렌더링이 클라이언트에서 수행된다.

#### 장점
- 클라이언트에서 자유롭게 UI를 구성할 수 있다.

#### 단점
- 초기 로딩 속도가 느려질 수 있다.
- JavaScript가 로드되지 않으면 페이지가 제대로 보이지 않을 수 있다.
- SEO에 불리할 수 있다.

![img2](/notes/imgs/img2.png)

> 🌱 SEO
> 
> **검색 엔진 최적화**를 의미한다.
> 웹 사이트나 웹 페이지가 검색 엔진 결과 페이지 (SERP)에서 더 높은 순위에 나타나도록
> 최적화하는 일련의 전략과 기법을 가르킨다.
> SEO의 목적은 검색 엔진에서 사용자가 특정 키워드를 검색할 때,
> 해당 웹 사이트가 상위에 노출되어 더 많은 방문자를 유도하는 것이다.

## [라우팅 설정하기](https://www.inflearn.com/course/lecture?courseSlug=%ED%95%9C%EC%9E%85-%EB%A6%AC%EC%95%A1%ED%8A%B8&unitId=103541&tab=curriculum)
### React Router
[npmjs.com](https://www.npmjs.com/)에 등록되어 있는 **React 애플리케이션에서 라우팅을 구현하기 위한 표준** 라이브러리

대다수의 리액트 앱이 사용하고 있는 대표격 라이브러리

라우팅은 애플리케이션의 URL을 기반으로 서로 다른 컴포넌트를 렌더링하는 방식으로, React Router는 이를 쉽게 구현할 수 있도록 다양한 기능과 도구를 제공한다.

### 설정하기
1. 프로젝트 내부에서 터미널 실행
2. `npm i react-router-dom` 입력하여 설치하기

### 적용하기
1. [main.jsx](..%2Fsrc%2Fmain.jsx)에 `BrowserRouter` import 하기
```jsx
import {BrowserRouter} from "react-router-dom";
```
2. [main.jsx](..%2Fsrc%2Fmain.jsx)에서 `<App/>`을 `<BrowserRouter>`로 감싸기
```jsx
ReactDOM.createRoot(document.getElementById('root')).render(
    <BrowserRouter>
        <App />
    </BrowserRouter>
)
```
3. page 컴포넌트 생성하기

(예시)
- [Home.jsx](..%2Fsrc%2Fpages%2FHome.jsx) : 모든 일기를 조회하는 Home 페이지
- [New.jsx](..%2Fsrc%2Fpages%2FNew.jsx) : 새로운 일기를 작성하는 New 페이지
- [Diary.jsx](..%2Fsrc%2Fpages%2FDiary.jsx) : 일기를 상세하게 조회하는 Diary 페이지

4. [App.jsx](..%2Fsrc%2FApp.jsx)에서 page 컴포넌트 import
```jsx
import Home from "./pages/Home.jsx";
import New from "./pages/New.jsx";
import Diary from "./pages/Diary.jsx";
```

5. [App.jsx](..%2Fsrc%2FApp.jsx)에서 `Routes`, `Route` 컴포넌트 import
```jsx
import {Routes, Route} from "react-router-dom";
```

6. [App.jsx](..%2Fsrc%2FApp.jsx)에서 컴포넌트 추가하기.
- path: url 경로
- element: 컴포넌트
```jsx
function App() {
    return (
        <Routes>
            <Route path="/" element={<Home/>}/>
            <Route path="/new" element={<New/>}/>
            <Route path="/diary" element={<Diary/>}/>
        </Routes>
    );
}
```

7. 확인하기
- url에 `http://localhost:5173/`, `http://localhost:5173/new`, `http://localhost:5173/diary` 입력하기
- 이때, url에 설정되지 않은 경로 입력 시 출력될 페이지를 지정할 수 있다.
  -  [Notfound.jsx](..%2Fsrc%2Fpages%2FNotfound.jsx) 파일 생성
  - `App.jsx`에 import 및 `<Route path="*" element={<Notfound/>}/>` 코드 추가
  - 존재하지 않은 url 입력 시 path가 `*`인 컴포넌트가 출력되게 된다.

### 주의사항
1. [App.jsx](..%2Fsrc%2FApp.jsx)에는 `<Routes>`안에는 `<Route>` 만 입력할 수 있다.
2. 아래와 같이 입력 시 모든 페이지에서 `Routes` 외부에 있는 값(`<div>Hello</div>`)들이 노출된다.
```jsx
function App() {
    return (
        <>
            <div>Hello</div>
            <Routes>
                <Route path="/" element={<Home/>}/>
                <Route path="/new" element={<New/>}/>
                <Route path="/diary" element={<Diary/>}/>
            </Routes>
        </>
    );
}
```

## [페이지 이동](https://www.inflearn.com/course/lecture?courseSlug=%ED%95%9C%EC%9E%85-%EB%A6%AC%EC%95%A1%ED%8A%B8&unitId=103542&tab=curriculum)
### `Link`
1. [App.jsx](..%2Fsrc%2FApp.jsx)에서 `Link` import 하기
```jsx
import {Link} from "react-router-dom";
```

2. [App.jsx](..%2Fsrc%2FApp.jsx)에서 `Link` 적용하기
- to: 이동할 경로
```jsx
function App() {
  return (
          <>
            <div>
              <Link to={"/"}>Home</Link>
              <Link to={"/new"}>New</Link>
              <Link to={"/diary"}>Diary</Link>
            </div>
            <Routes>
              <Route path="/" element={<Home/>}/>
              <Route path="/new" element={<New/>}/>
              <Route path="/diary" element={<Diary/>}/>
              <Route path="*" element={<Notfound/>}/>
            </Routes>
          </>
  );
}
```
> 🚨`<a>` 사용 시 CSR 방식이 적용되지 않는다.

### `useNavigate`
1. [App.jsx](..%2Fsrc%2FApp.jsx)에서 `useNavigate` import 하기
```jsx
import {Routes, Route, Link, useNavigate} from "react-router-dom";
```
2. [App.jsx](..%2Fsrc%2FApp.jsx)에서 `useNavigate` 적용하기
```jsx
function App() {
    const nav = useNavigate();

    const onClickButton = () => {
        nav('/new');
    }
    return (
        <>
            <button onClick={onClickButton}>New 페이지로 이동</button>
            <Routes>
                <Route path="/" element={<Home/>}/>
                <Route path="/new" element={<New/>}/>
                <Route path="/diary" element={<Diary/>}/>
                <Route path="*" element={<Notfound/>}/>
            </Routes>
        </>
    );
}

export default App
```

## [동적 경로](https://www.inflearn.com/course/lecture?courseSlug=%ED%95%9C%EC%9E%85-%EB%A6%AC%EC%95%A1%ED%8A%B8&unitId=210896&tab=curriculum)
### 동적 경로(Dynamic Segments)란?
**동적인 데이터**를 포함하고 있는 경로
- URL Parameter
  - 뒤에 아이템의 id를 명시
  - 아이템의 id 와 같이 변경되지 않는 값을 주소로 명시하기 위해 사용된다.
  - ex) `~/product/1`, `~/product/2`, `~/product/3`
- Query String
  - ? 뒤에 변수명과 값 명시
  - 검색어와 같이 자주 변경되는 값을 주소로 명시하기 위해 사용된다.
  - ex) `~/search?q=검색어`
### URL Parameter 방식 적용하기
1. [App.jsx](..%2Fsrc%2FApp.jsx)에서 `Diary`를 동적 경로로 변경하기
```jsx
<Route path="/diary/:id" element={<Diary/>}/>
```

2. [Diary.jsx](..%2Fsrc%2Fpages%2FDiary.jsx)에서 `useParams` import 후 파라미터로 받기
```jsx
import {useParams} from "react-router-dom";

const Diary = () => {
  const params = useParams();
  return (
          <div>
            Diary - 
            {params.id}번 일기 입니다.
          </div>
  );
}

export default Diary;
```

### Query String 사용하기
1. [Home.jsx](..%2Fsrc%2Fpages%2FHome.jsx)에서 `useSearchParams` import 후 사용하기
```jsx
import {useSearchParams} from "react-router-dom";

const Home = () => {
    const [params, setParams] = useSearchParams();

    return (
        <div>
            Home - 
            {params.get("value")}
        </div>
    );
}

export default Home;
```

2. 확인: `http://localhost:5173/?value=hi` url로 이동